name: Labels

on:  # yamllint disable-line rule:truthy
  pull_request:
    types: [opened, labeled, unlabeled, synchronize, ready_for_review]

jobs:
  check-type-label:
    name: ensure labeled
    runs-on: ubuntu-latest
    # skip for draft PRs
    if: github.event.pull_request.draft == false
    steps:
      - uses: shioyang/check-pr-labels-on-push-action@v1.0.9
        id: check_pr_labels
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          labels: '["bug", "enhancement", "api", "maintenance", "documentation"]'
      - name: Show result
        run: echo "${{ steps.check_pr_labels.outputs.result }}"
      - name: Terminate if no label
        if: steps.check_pr_labels.outputs.result == 'false'
        run: |
            echo "A maintainer needs to add an appropriate label before merge"
            exit 1
